<!DOCTYPE html><html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>3D Мини-игра: Сон или нет</title>
<style>
  body { margin: 0; overflow: hidden; }
  canvas { display: block; }
  #message { position: absolute; top: 20px; left: 50%; transform: translateX(-50%); background: rgba(0,0,0,0.7); color: white; padding: 10px 20px; border-radius: 8px; font-size: 20px; display: none; }
</style>
</head>
<body>
<div id="message"></div>
<script src="https://cdn.jsdelivr.net/npm/three@0.158.0/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/gsap@3.14.0/dist/gsap.min.js"></script>
<script>
let scene, camera, renderer;
let character, phone, key, chaser;
let message = document.getElementById('message');init(); animate();

function init(){ scene = new THREE.Scene(); scene.background = new THREE.Color(0xa0a0a0);

camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000); camera.position.set(0, 10, 20); camera.lookAt(0,0,0);

renderer = new THREE.WebGLRenderer({antialias:true}); renderer.setSize(window.innerWidth, window.innerHeight); document.body.appendChild(renderer.domElement);

// LIGHT const light = new THREE.DirectionalLight(0xffffff, 1); light.position.set(10,20,10); scene.add(light);

// FLOOR const floorGeo = new THREE.PlaneGeometry(50,50); const floorMat = new THREE.MeshStandardMaterial({color:0x808080}); const floor = new THREE.Mesh(floorGeo, floorMat); floor.rotation.x = -Math.PI/2; scene.add(floor);

// WALLS (комната) const wallMat = new THREE.MeshStandardMaterial({color:0xf2e6d9}); const wall1 = new THREE.Mesh(new THREE.BoxGeometry(50,20,1), wallMat); wall1.position.set(0,10,-25); scene.add(wall1); const wall2 = new THREE.Mesh(new THREE.BoxGeometry(50,20,1), wallMat); wall2.position.set(0,10,25); scene.add(wall2); const wall3 = new THREE.Mesh(new THREE.BoxGeometry(1,20,50), wallMat); wall3.position.set(-25,10,0); scene.add(wall3); const wall4 = new THREE.Mesh(new THREE.BoxGeometry(1,20,50), wallMat); wall4.position.set(25,10,0); scene.add(wall4);

// CHARACTER const charGeo = new THREE.BoxGeometry(2,4,2); const charMat = new THREE.MeshStandardMaterial({color:0x00ff00}); character = new THREE.Mesh(charGeo,charMat); character.position.set(-20,2,0); scene.add(character);

// PHONE const phoneGeo = new THREE.BoxGeometry(1,2,0.5); const phoneMat = new THREE.MeshStandardMaterial({color:0x0000ff}); phone = new THREE.Mesh(phoneGeo, phoneMat); phone.position.set(0,1,0); scene.add(phone);

// KEY const keyGeo = new THREE.BoxGeometry(1,0.5,0.5); const keyMat = new THREE.MeshStandardMaterial({color:0xffff00}); key = new THREE.Mesh(keyGeo, keyMat); key.position.set(15,0.25,10); scene.add(key);

// CHASER (кто-то убегает с ключом) const chaserGeo = new THREE.BoxGeometry(2,4,2); const chaserMat = new THREE.MeshStandardMaterial({color:0xff0000}); chaser = new THREE.Mesh(chaserGeo,chaserMat); chaser.position.set(15,2,10); scene.add(chaser);

startStory(); }

function startStory(){ // Идём к телефону gsap.to(character.position,{x:0,duration:2, onComplete:()=>{ message.innerText = 'Через 1 час...'; message.style.display = 'block'; setTimeout(()=>{ message.style.display = 'none'; // Переход в школу gsap.to(character.position,{x: -20, z: -20, duration:2, onComplete:schoolScene}); },2000); }}); }

function schoolScene(){ message.innerText = 'Найди ключ!'; message.style.display = 'block';

// Персонаж ищет ключ (плавно идёт к ключу) gsap.to(character.position,{x:15, z:10, duration:4, onComplete:()=>{ message.innerText = 'Ты нашёл ключ!'; // Кто-то хватает ключ и убегает gsap.to(chaser.position,{x:-25, z:-25, duration:3}); gsap.to(key.position,{x:-25, z:-25, duration:3, onComplete:()=>{ message.innerText = 'Преследуй его!'; // Персонаж бежит за ним gsap.to(character.position,{x:-25, z:-25, duration:4, onComplete:()=>{ message.innerText = 'Это была ловушка... Ты просыпаешься.'; }}); }}); }}); }

function animate(){ requestAnimationFrame(animate); renderer.render(scene,camera); }

window.addEventListener('resize',()=>{ camera.aspect = window.innerWidth/window.innerHeight; camera.updateProjectionMatrix(); renderer.setSize(window.innerWidth, window.innerHeight); }); </script>

</body>
</html>
